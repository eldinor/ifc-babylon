const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/textureMerger.fragment-Diex8Ein.js","assets/index-Ds31uFJL.js","assets/index-C6xCZRv9.css","assets/textureMerger.fragment-U6gdnRcU.js"])))=>i.map(i=>d[i]);
import{bq as x,w1 as I,bH as w}from"./index-Ds31uFJL.js";function C(e,t,l,i,u){return(1-e)*(1-e)*(1-e)*t+3*(1-e)*(1-e)*e*l+3*(1-e)*e*e*i+e*e*e*u}function S(e,t=new x(0,1),l=new x(0,.1),i=new x(0,.1),u=new x(1300,.1)){const c=Math.pow(e/u.x,.333333);return C(c,t.y,l.y,i.y,u.y)}const T="textureMerger";function p(e){return"texture"in e}function d(e){return"value"in e}function v(e,t){t.uOffset=e.uOffset,t.vOffset=e.vOffset,t.uScale=e.uScale,t.vScale=e.vScale,t.uAng=e.uAng,t.vAng=e.vAng,t.wAng=e.wAng,t.uRotationCenter=e.uRotationCenter,t.vRotationCenter=e.vRotationCenter}async function R(e,t,l){const i=[t.red,t.green,t.blue,t.alpha],u=[],c=[];for(let n=0;n<4;n++){const r=i[n];if(r)if(p(r)){if(r.sourceChannel<0||r.sourceChannel>3)throw new Error("Source channel must be between 0 and 3 (R, G, B, A)");let a=u.indexOf(r.texture);a===-1&&(a=u.length,u.push(r.texture)),c[n]=a}else if(d(r)){if(r.value<0||r.value>1)throw new Error("Constant value must be between 0.0 and 1.0");c[n]=-1}else throw new Error("Invalid channel input configuration");else c[n]=-1}let f=t.outputSize;if(!f&&u.length>0){let n=0;for(const r of u){const a=r.getSize(),s=Math.max(a.width,a.height);s>n&&(n=s,f=a.width===a.height?n:a)}}f=f||512;const h=[],g=new Set;for(let n=0;n<4;n++){const r=i[n],a=["RED","GREEN","BLUE","ALPHA"][n];if(r&&p(r)){h.push(`${a}_FROM_TEXTURE`);const s=c[n];g.add(s)}}g.forEach(n=>{h.push(`USE_TEXTURE${n}`)});const E={type:2,format:5,samplingMode:1,generateDepthBuffer:!1,generateMipMaps:!1,shaderLanguage:l.getEngine().isWebGPU?1:0,extraInitializationsAsync:async()=>{l.getEngine().isWebGPU?await Promise.all([w(()=>import("./textureMerger.fragment-Diex8Ein.js"),__vite__mapDeps([0,1,2]))]):await Promise.all([w(()=>import("./textureMerger.fragment-U6gdnRcU.js"),__vite__mapDeps([3,1,2]))])}},o=new I(e,f,T,l,E);o.refreshRate=-1,o.defines=h.length>0?"#define "+h.join(`
#define `)+`
`:"";for(let n=0;n<u.length;n++)v(u[n],o),o.setTexture(`inputTexture${n}`,u[n]);for(let n=0;n<4;n++){const r=i[n],a=["red","green","blue","alpha"][n];if(r&&p(r)){const s=c[n];o.setInt(`${a}TextureIndex`,s),o.setInt(`${a}SourceChannel`,r.sourceChannel)}else{let s;r&&d(r)?s=r.value:s=n===3?1:0,o.setFloat(`${a}ConstantValue`,s)}}return await new Promise((n,r)=>{o.executeWhenReady(()=>{try{o.render(),n(o)}catch(a){r(a instanceof Error?a:new Error(String(a)))}})})}function _(e,t){return{texture:e,sourceChannel:t}}function A(e){return{value:e}}function b(e,t,l,i){return{red:e,green:t,blue:l,alpha:i}}export{A as C,R as M,S,b as a,_ as b};
